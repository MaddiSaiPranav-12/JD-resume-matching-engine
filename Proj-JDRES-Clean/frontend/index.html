<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SyncPlex • JD → Resume</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .hidden {
            display: none !important;
        }

        /* Custom scrollbar for dark mode aesthetics */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #3f3f46;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #52525b;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            950: '#09090b',
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-zinc-50 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 min-h-screen transition-colors duration-200"
    id="appBody">

    <!-- Top bar -->
    <nav class="sticky top-0 z-40 border-b border-zinc-200 bg-white/70 dark:border-zinc-800 dark:bg-zinc-950/70 backdrop-blur"
        id="topBar">
        <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-3">
            <div class="flex items-center gap-3">
                <div class="h-9 w-9 rounded-xl grid place-items-center border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900"
                    id="brandLogo">
                    <span class="text-sm font-semibold">SP</span>
                </div>
                <div>
                    <div class="text-sm font-semibold">SyncPlex • JD → Resume</div>
                    <div class="text-xs text-zinc-500 dark:text-zinc-400">Recruiter workspace</div>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <button id="themeToggleBtn"
                    class="flex items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm transition hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="h-4 w-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                    </svg>
                    <span>Light</span>
                </button>

                <div class="flex items-center gap-2 rounded-xl border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900 px-3 py-2"
                    id="userProfile">
                    <div class="h-7 w-7 rounded-full bg-gradient-to-br from-sky-400 to-indigo-500"></div>
                    <div class="leading-tight">
                        <div class="text-xs font-semibold">Signed in</div>
                        <div class="text-[11px] text-zinc-500 dark:text-zinc-400">Gmail OAuth</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Layout -->
    <div class="mx-auto grid max-w-7xl grid-cols-1 gap-4 px-4 py-4 md:grid-cols-[320px_1fr]">

        <!-- Sidebar -->
        <aside class="rounded-2xl border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900/60 p-3"
            id="sidebar">
            <div class="flex items-center justify-between gap-2 mb-3">
                <div>
                    <div class="text-sm font-semibold">Jobs</div>
                    <div class="text-xs text-zinc-500 dark:text-zinc-400">Each job is a workspace</div>
                </div>
                <button id="newJobBtn"
                    class="flex items-center gap-2 rounded-xl bg-zinc-900 px-3 py-2 text-sm font-medium text-zinc-50 transition hover:bg-zinc-800 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="h-4 w-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                    New Job
                </button>
            </div>

            <div id="jobsList" class="space-y-2 max-h-[calc(100vh-250px)] overflow-y-auto">
                <!-- Job items will be injected here -->
            </div>

            <div class="mt-4 rounded-xl border border-zinc-200 dark:border-zinc-800 p-3" id="tipBox">
                <div class="text-xs font-semibold">Tip</div>
                <div class="mt-1 text-xs text-zinc-500 dark:text-zinc-400">
                    Name the job clearly (client + role + location). This makes ranking history easy.
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="rounded-2xl border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900/60"
            id="mainPanel">
            <!-- Header -->
            <div class="border-b border-zinc-200 dark:border-zinc-800 p-4" id="mainHeader">
                <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
                    <div>
                        <div class="text-base font-semibold" id="activeJobTitleDisplay">Job</div>
                        <div class="text-sm text-zinc-500 dark:text-zinc-400">
                            Upload a JD file or paste JD text. Then extract skills → calculate match → rank resumes.
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="jobTitleInput"
                            class="w-full md:w-72 rounded-xl border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm focus:outline-none focus:border-zinc-400 dark:border-zinc-800 dark:bg-zinc-950/40 dark:focus:border-zinc-700"
                            placeholder="Job name" value="">
                    </div>
                </div>
            </div>

            <div class="p-4">
                <div class="grid grid-cols-1 gap-4 lg:grid-cols-2">

                    <!-- JD Upload / Input Section -->
                    <section id="jdSection"
                        class="rounded-2xl border border-zinc-200 dark:border-zinc-800 p-4 transition-colors">
                        <div class="flex items-start justify-between gap-3 mb-4">
                            <div>
                                <div class="text-sm font-semibold">Job Description</div>
                                <div class="text-xs text-zinc-500 dark:text-zinc-400">Drag & drop PDF/DOCX/TXT, or click
                                    Upload</div>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="file" id="jdFileInput" accept=".pdf,.doc,.docx,.txt" class="hidden">
                                <button id="uploadJdBtn"
                                    class="flex items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm transition hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                                    </svg>
                                    Upload JD
                                </button>
                                <button id="clearJdBtn"
                                    class="hidden flex items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm text-red-500 transition hover:bg-zinc-50 hover:text-red-600 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800 dark:text-red-400 dark:hover:text-red-300"
                                    title="Remove file">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                                    </svg>
                                    Clear
                                </button>
                            </div>
                        </div>

                        <!-- File Info Box -->
                        <div id="jdFileInfoBox" class="mb-4">
                            <!-- Empty State / Drop Zone -->
                            <div id="jdFilePlaceholder"
                                class="cursor-pointer flex flex-col items-center justify-center rounded-2xl border border-dashed border-zinc-300 bg-zinc-50/50 py-12 transition hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-900/20 dark:hover:bg-zinc-900/40">
                                <div class="mb-3 rounded-full text-zinc-400 dark:text-zinc-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="2" stroke="currentColor" class="h-8 w-8">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                                    </svg>
                                </div>
                                <div class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Drop a JD file here
                                </div>
                            </div>

                            <!-- File Details -->
                            <div id="jdFileDetails"
                                class="hidden flex items-start justify-between gap-3 rounded-2xl border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900/30">
                                <div class="min-w-0">
                                    <div id="jdFileName" class="truncate text-sm font-semibold">filename.pdf</div>
                                    <div id="jdFileSize" class="text-xs text-zinc-500 dark:text-zinc-400">0 KB • file
                                    </div>
                                </div>
                                <div
                                    class="rounded-xl border border-zinc-200 bg-white px-2 py-1 text-xs dark:border-zinc-800 dark:bg-zinc-900">
                                    JD file</div>
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="text-xs font-semibold text-zinc-500 dark:text-zinc-400">Or paste JD
                                text</label>
                            <textarea id="jdTextArea"
                                class="mt-2 h-44 w-full resize-none rounded-2xl border border-zinc-200 bg-zinc-50 p-3 text-sm focus:border-sky-500 focus:outline-none placeholder-zinc-400 dark:border-zinc-800 dark:bg-zinc-950/40 dark:focus:border-sky-500/60 dark:placeholder-zinc-600"
                                placeholder="Paste job description here…"></textarea>
                        </div>
                    </section>

                    <!-- Results Section -->
                    <section class="rounded-2xl border border-zinc-200 dark:border-zinc-800 p-4" id="resultsSection">
                        <div class="flex items-start justify-between gap-3 mb-4">
                            <div class="flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                    stroke="currentColor" class="h-5 w-5 text-zinc-500">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.456-2.456L14.25 6l1.035-.259a3.375 3.375 0 002.456-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
                                </svg>
                                <div>
                                    <div class="text-base font-bold text-zinc-900 dark:text-zinc-100">Results</div>
                                    <div class="text-xs text-zinc-500 dark:text-zinc-400">Extracted skills, match score,
                                        and ranked resumes</div>
                                </div>
                            </div>
                            <div id="statusBadge"
                                class="rounded-full border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900 px-4 py-1.5 text-xs font-medium shadow-sm">
                                Ready
                            </div>
                        </div>

                        <div class="mt-4 rounded-2xl border border-zinc-200 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950/30 p-4 min-h-[200px]"
                            id="resultsContent">
                            <!-- Placeholder Content -->
                            <div id="resultsPlaceholder" class="space-y-6">
                                <!-- Extracted Skills Item -->
                                <div class="flex items-start gap-4">
                                    <div
                                        class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-cyan-400 text-black shadow-md shadow-cyan-400/20">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                            stroke-width="2" stroke="currentColor" class="h-5 w-5">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.456-2.456L14.25 6l1.035-.259a3.375 3.375 0 002.456-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">Extracted
                                            Skills</div>
                                        <div class="text-xs text-zinc-500 dark:text-zinc-400 mt-0.5">Show chips like:
                                            Java, AWS, Airflow, Kafka, SQL...</div>
                                    </div>
                                </div>

                                <!-- Match Summary Item -->
                                <div class="flex items-start gap-4">
                                    <div
                                        class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-pink-500 to-orange-400 text-white shadow-md shadow-pink-500/20">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                            stroke-width="2" stroke="currentColor" class="h-5 w-5">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" />
                                        </svg>
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">Match
                                            Summary</div>
                                        <div class="text-xs text-zinc-500 dark:text-zinc-400 mt-0.5">Score, gaps, and
                                            top highlights.</div>
                                    </div>
                                </div>

                                <!-- Ranked Resumes Item -->
                                <div class="flex items-start gap-4">
                                    <div
                                        class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-green-400 text-black shadow-md shadow-green-400/20">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                            stroke-width="2" stroke="currentColor" class="h-5 w-5">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25" />
                                        </svg>
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">Ranked
                                            Resumes</div>
                                        <div class="text-sm text-zinc-500 dark:text-zinc-400 mt-0.5">Table: Candidate,
                                            Visa, Rate, Match %, Missing Skills.</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Skills List -->
                            <div id="skillsDisplay" class="hidden space-y-3">
                                <div class="text-xs font-semibold text-sky-500 dark:text-sky-400">Extracted Skills</div>
                                <div id="skillsList" class="flex flex-wrap gap-2"></div>
                            </div>
                        </div>

                        <!-- Resume Upload Area (New addition to fit flow) -->
                        <div class="mt-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 p-4">
                            <div class="flex items-center justify-between">
                                <div class="text-xs font-semibold">Resumes</div>
                                <input type="file" id="resumeFileInput" accept=".pdf,.doc,.docx,.txt" class="hidden">
                                <button id="uploadResumeBtn"
                                    class="flex items-center gap-1.5 rounded border border-zinc-300 bg-zinc-100 px-2 py-1 text-xs transition hover:bg-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 dark:hover:bg-zinc-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="2" stroke="currentColor" class="h-3 w-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                    Upload Resume
                                </button>
                            </div>
                            <div id="resumesList"
                                class="mt-2 space-y-1 text-xs text-zinc-500 dark:text-zinc-400 max-h-32 overflow-y-auto">
                                <!-- List of uploaded resumes -->
                                <div class="italic text-zinc-400 dark:text-zinc-600">No resumes uploaded yet.</div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Action Buttons -->
                <!-- Action Buttons -->
                <div class="mt-5 flex flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:justify-center">
                    <button id="extractBtn" disabled
                        class="group flex items-center justify-center gap-2 rounded-2xl px-5 py-3 text-sm font-semibold transition-all disabled:cursor-not-allowed disabled:bg-zinc-200 disabled:text-zinc-500 disabled:shadow-none dark:disabled:bg-zinc-800 dark:disabled:text-zinc-500 bg-sky-500 text-white shadow-lg shadow-sky-500/30 hover:bg-sky-600 hover:scale-[1.02] dark:bg-sky-500 dark:hover:bg-sky-400">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="h-4 w-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.456-2.456L14.25 6l1.035-.259a3.375 3.375 0 002.456-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                        </svg>
                        Extract Skills
                    </button>

                    <button id="matchBtn" disabled
                        class="group flex items-center justify-center gap-2 rounded-2xl px-5 py-3 text-sm font-semibold transition-all disabled:cursor-not-allowed disabled:bg-zinc-200 disabled:text-zinc-500 disabled:shadow-none dark:disabled:bg-zinc-800 dark:disabled:text-zinc-500 bg-fuchsia-500 text-white shadow-lg shadow-fuchsia-500/30 hover:bg-fuchsia-600 hover:scale-[1.02] dark:bg-fuchsia-500 dark:hover:bg-fuchsia-400">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="h-4 w-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5" />
                        </svg>
                        Calculate Match
                    </button>

                    <button id="rankBtn" disabled
                        class="group flex items-center justify-center gap-2 rounded-2xl px-5 py-3 text-sm font-semibold transition-all disabled:cursor-not-allowed disabled:bg-zinc-200 disabled:text-zinc-500 disabled:shadow-none dark:disabled:bg-zinc-800 dark:disabled:text-zinc-500 bg-emerald-500 text-white shadow-lg shadow-emerald-500/30 hover:bg-emerald-600 hover:scale-[1.02] dark:bg-emerald-500 dark:hover:bg-emerald-400">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="h-4 w-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25" />
                        </svg>
                        Rank Resumes
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="fixed bottom-4 left-1/2 z-50 w-[92vw] max-w-md -translate-x-1/2 translate-y-20 opacity-0 transition-all duration-300">
        <div
            class="rounded-2xl border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900 px-4 py-3 text-sm shadow-lg">
            <div class="flex items-start gap-3">
                <div id="toastIcon" class="mt-0.5 h-2.5 w-2.5 rounded-full bg-emerald-400"></div>
                <div class="min-w-0">
                    <div id="toastTitle" class="font-semibold text-zinc-900 dark:text-zinc-100">Notification</div>
                    <div id="toastMessage" class="mt-0.5 text-sm text-zinc-500 dark:text-zinc-400">Message content</div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>

</html>